generator client {
  provider = "prisma-client-js"
  output   = "../node_modules/.prisma/client"
}

datasource db {
  provider = "postgresql"
}

model Device {
  mac         String   @id
  type        String // probe, ap, sta
  name        String
  description String?
  reports     Report[] @relation("reports")
  reportedBy  Report[] @relation("reportedBy")

  @@index([mac])
  @@index([name])
  @@index([description])
}

model Report {
  id        Int    @id @default(autoincrement())
  probeMac  String
  deviceMac String
  probe     Device @relation("reports", fields: [probeMac], references: [mac])
  device    Device @relation("reportedBy", fields: [deviceMac], references: [mac])

  rssi      Int
  createdAt DateTime @default(now())
}
